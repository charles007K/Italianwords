<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quaderno di Vocaboli ğŸ“š</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f7f9fc;
        }
        .container {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background-color: #4caf50;
            transition: width 0.3s ease;
        }
        .progress-text {
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
        }
        .card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .definition {
            font-size: 18px;
            margin-bottom: 20px;
        }
        .input-area {
            margin-bottom: 20px;
        }
        input[type="text"] {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .btn {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 4px;
            width: 100%;
        }
        .btn:hover {
            background-color: #45a049;
        }
        .result {
            font-size: 18px;
            margin-top: 20px;
            text-align: center;
        }
        .correct {
            color: #4caf50;
        }
        .incorrect {
            color: #f44336;
        }
        .summary {
            margin-top: 30px;
            text-align: center;
            display: none;
        }
        .restart-btn {
            background-color: #2196F3;
            margin-top: 20px;
        }
        .restart-btn:hover {
            background-color: #0b7dda;
        }
        .settings {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
        }
        select, button {
            padding: 10px;
            font-size: 16px;
            border-radius: 4px;
        }
        .wrong-words {
            margin-top: 20px;
            text-align: left;
        }
        .wrong-words ul {
            list-style: none;
            padding: 0;
        }
        .wrong-words li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Quaderno di Vocaboli ğŸ“š</h1>
            <div class="settings">
                <select id="groupSelect">
                    <option value="-1">Tutte le parole (126) ğŸŒ</option>
                    <option value="0">Gruppo 1 (6) ğŸ¥‡</option>
                    <option value="1">Gruppo 2 (6) ğŸ¥ˆ</option>
                    <option value="2">Gruppo 3 (6) ğŸ¥‰</option>
                    <option value="3">Gruppo 4 (6) â­</option>
                    <option value="4">Gruppo 5 (6) ğŸŒŸ</option>
                    <option value="5">Gruppo 6 (6) ğŸš€</option>
                    <option value="6">Gruppo 7 (6) ğŸ¯</option>
                    <option value="7">Gruppo 8 (6) ğŸ””</option>
                    <option value="8">Gruppo 9 (6) ğŸˆ</option>
                    <option value="9">Gruppo 10 (6) ğŸ‰</option>
                    <option value="10">Gruppo 11 (6) ğŸ</option>
                    <option value="11">Gruppo 12 (6) ğŸŠ</option>
                    <option value="12">Gruppo 13 (6) ğŸ‹</option>
                    <option value="13">Gruppo 14 (6) ğŸ‰</option>
                    <option value="14">Gruppo 15 (7) ğŸ’</option>
                    <option value="15">Gruppo 16 (7) ğŸ“</option>
                    <option value="16">Gruppo 17 (7) ğŸ‡</option>
                    <option value="17">Gruppo 18 (7) ğŸ</option>
                    <option value="18">Gruppo 19 (7) ğŸ¥­</option>
                    <option value="19">Gruppo 20 (7) ğŸ¥‘</option>
                </select>
                <select id="modeSelect">
                    <option value="zh2en">Cinese â†’ Italiano ğŸ‡®ğŸ‡¹</option>
                    <option value="en2zh">Italiano â†’ Cinese ğŸ‡¨ğŸ‡³</option>
                </select>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>
        <div class="progress-text" id="progressText"></div>
        
        <div class="card" id="wordCard">
            <div class="definition" id="definition"></div>
            <div class="input-area">
                <input type="text" id="wordInput" placeholder="Inserisci la risposta âœï¸" autocomplete="off">
            </div>
            <button class="btn" id="checkBtn">Controlla âœ…</button>
            <button class="btn" id="skipBtn" style="background-color: #ff9800; margin-top: 10px;">Salta â­ï¸</button>
            <div class="result" id="result"></div>
        </div>
        
        <div class="summary" id="summary">
            <h2>Completato! ğŸ‰</h2>
            <p>Il tuo punteggio: <span id="score"></span>/<span id="total"></span> ğŸ†</p>
            <div class="wrong-words" id="wrongWords"></div>
            <button class="btn restart-btn" id="restartBtn">Ricomincia ğŸ”„</button>
        </div>
    </div>

    <script>
        // è¯æ±‡åˆ†ç»„æ•°æ®
        const wordGroups = [
            [
                { "en": "macchina", "zh": "æ±½è½¦" },
                { "en": "scuola", "zh": "å­¦æ ¡" },
                { "en": "lavoro", "zh": "å·¥ä½œ" },
                { "en": "casa", "zh": "æˆ¿å­" },
                { "en": "negozio", "zh": "å•†åº—" },
                { "en": "cibo", "zh": "é£Ÿç‰©" }
            ],
            [
                { "en": "acqua", "zh": "æ°´" },
                { "en": "pane", "zh": "é¢åŒ…" },
                { "en": "latte", "zh": "ç‰›å¥¶" },
                { "en": "pomeriggio", "zh": "ä¸‹åˆ" },
                { "en": "sera", "zh": "æ™šä¸Š" },
                { "en": "oggi", "zh": "ä»Šå¤©" }
            ],
            [
                { "en": "ieri", "zh": "æ˜¨å¤©" },
                { "en": "domani", "zh": "æ˜å¤©" },
                { "en": "settimana", "zh": "æ˜ŸæœŸ" },
                { "en": "mese", "zh": "æœˆä»½" },
                { "en": "anno", "zh": "å¹´" },
                { "en": "minuto", "zh": "åˆ†é’Ÿ" }
            ],
            [
                { "en": "secondo", "zh": "ç§’" },
                { "en": "chiave", "zh": "é’¥åŒ™" },
                { "en": "soldi", "zh": "é’±" },
                { "en": "banca", "zh": "é“¶è¡Œ" },
                { "en": "ospedale", "zh": "åŒ»é™¢" },
                { "en": "farmacia", "zh": "è¯åº—" }
            ],
            [
                { "en": "medico", "zh": "åŒ»ç”Ÿ" },
                { "en": "infermiere", "zh": "æŠ¤å£«" },
                { "en": "malattia", "zh": "ç–¾ç—…" },
                { "en": "febbre", "zh": "å‘çƒ§" },
                { "en": "dolore", "zh": "ç–¼ç—›" },
                { "en": "gatto", "zh": "çŒ«" }
            ],
            [
                { "en": "uccello", "zh": "é¸Ÿ" },
                { "en": "formaggio", "zh": "å¥¶é…ª" },
                { "en": "frutta", "zh": "æ°´æœ" },
                { "en": "verdura", "zh": "è”¬èœ" },
                { "en": "telefono", "zh": "ç”µè¯" },
                { "en": "computer", "zh": "ç”µè„‘" }
            ],
            [
                { "en": "sedia", "zh": "æ¤…å­" },
                { "en": "tavolo", "zh": "æ¡Œå­" },
                { "en": "letto", "zh": "åºŠ" },
                { "en": "finestra", "zh": "çª—æˆ·" },
                { "en": "porta", "zh": "é—¨" },
                { "en": "colore", "zh": "é¢œè‰²" }
            ],
            [
                { "en": "rosso", "zh": "çº¢è‰²" },
                { "en": "verde", "zh": "ç»¿è‰²" },
                { "en": "blu", "zh": "è“è‰²" },
                { "en": "giallo", "zh": "é»„è‰²" },
                { "en": "nero", "zh": "é»‘è‰²" },
                { "en": "bianco", "zh": "ç™½è‰²" }
            ],
            [
                { "en": "arancione", "zh": "æ©™è‰²" },
                { "en": "rosa", "zh": "ç²‰è‰²" },
                { "en": "grigio", "zh": "ç°è‰²" },
                { "en": "treno", "zh": "ç«è½¦" },
                { "en": "aereo", "zh": "é£æœº" },
                { "en": "autobus", "zh": "å…¬äº¤è½¦" }
            ],
            [
                { "en": "bicicletta", "zh": "è‡ªè¡Œè½¦" },
                { "en": "metropolitana", "zh": "åœ°é“" },
                { "en": "biglietto", "zh": "ç¥¨" },
                { "en": "stazione", "zh": "è½¦ç«™" },
                { "en": "fermata", "zh": "ç«™ç‚¹" },
                { "en": "mappa", "zh": "åœ°å›¾" }
            ],
            [
                { "en": "hotel", "zh": "æ—…é¦†" },
                { "en": "orologio", "zh": "é’Ÿè¡¨" },
                { "en": "scarpe", "zh": "é‹å­" },
                { "en": "giacca", "zh": "å¤¹å…‹" },
                { "en": "camicia", "zh": "è¡¬è¡«" },
                { "en": "pantaloni", "zh": "è£¤å­" }
            ],
            [
                { "en": "vestito", "zh": "è¿è¡£è£™" },
                { "en": "calze", "zh": "è¢œå­" },
                { "en": "occhiali", "zh": "çœ¼é•œ" },
                { "en": "borsa", "zh": "åŒ…" },
                { "en": "ombrello", "zh": "é›¨ä¼" },
                { "en": "marrone", "zh": "æ£•è‰²" }
            ],
            [
                { "en": "amico", "zh": "æœ‹å‹" },
                { "en": "persona", "zh": "äºº" },
                { "en": "bambino", "zh": "å°å­©" },
                { "en": "ragazzo", "zh": "ç”·å­©" },
                { "en": "ragazza", "zh": "å¥³å­©" },
                { "en": "donna", "zh": "å¥³äºº" }
            ],
            [
                { "en": "uomo", "zh": "ç”·äºº" },
                { "en": "famiglia", "zh": "å®¶åº­" },
                { "en": "genitori", "zh": "çˆ¶æ¯" },
                { "en": "figlio", "zh": "å„¿å­" },
                { "en": "figlia", "zh": "å¥³å„¿" },
                { "en": "nonno", "zh": "çˆ·çˆ·" }
            ],
            [
                { "en": "nonna", "zh": "å¥¶å¥¶" },
                { "en": "zio", "zh": "å”å”" },
                { "en": "zia", "zh": "é˜¿å§¨" },
                { "en": "cugino", "zh": "å ‚å…„å¼Ÿ" },
                { "en": "cugina", "zh": "å ‚å§å¦¹" },
                { "en": "marito", "zh": "ä¸ˆå¤«" },
                { "en": "moglie", "zh": "å¦»å­" }
            ],
            [
                { "en": "Intelligenza artificiale", "zh": "äººå·¥æ™ºèƒ½" },
                { "en": "E-commerce", "zh": "ç”µå­å•†åŠ¡" },
                { "en": "Pagamento online", "zh": "åœ¨çº¿æ”¯ä»˜" },
                { "en": "Forum", "zh": "è®ºå›" },
                { "en": "Influencer", "zh": "ç½‘çº¢" },
                { "en": "Mi piace", "zh": "ç‚¹èµ" },
                { "en": "Commento", "zh": "è¯„è®º" }
            ],
            [
                { "en": "Notifica", "zh": "é€šçŸ¥" },
                { "en": "Risoluzione", "zh": "åˆ†è¾¨ç‡" },
                { "en": "Pixelato", "zh": "é©¬èµ›å…‹åŒ–" },
                { "en": "pioggia", "zh": "é›¨" },
                { "en": "neve", "zh": "é›ª" },
                { "en": "vento", "zh": "é£" },
                { "en": "tempo", "zh": "å¤©æ°”" }
            ],
            [
                { "en": "giorno", "zh": "æ—¥" },
                { "en": "notte", "zh": "å¤œ" },
                { "en": "mattina", "zh": "æ—©æ™¨" },
                { "en": "nipote", "zh": "å­™å­/ä¾„å­" },
                { "en": "animale", "zh": "åŠ¨ç‰©" },
                { "en": "cane", "zh": "ç‹—" },
                { "en": "camera", "zh": "æˆ¿é—´" }
            ],
            [
                { "en": "valigia", "zh": "è¡Œæ" },
                { "en": "documento", "zh": "è¯ä»¶" },
                { "en": "passaporto", "zh": "æŠ¤ç…§" },
                { "en": "vacanza", "zh": "å‡æœŸ" },
                { "en": "viaggio", "zh": "æ—…è¡Œ" },
                { "en": "mare", "zh": "æµ·" },
                { "en": "montagna", "zh": "å±±" }
            ],
            [
                { "en": "spiaggia", "zh": "æ²™æ»©" },
                { "en": "sole", "zh": "å¤ªé˜³" },
                { "en": "strada", "zh": "è¡—é“" },
                { "en": "stazione", "zh": "è½¦ç«™" },
                { "en": "mappa", "zh": "åœ°å›¾" },
                { "en": "hotel", "zh": "æ—…é¦†" },
                { "en": "orologio", "zh": "é’Ÿè¡¨" }
            ]
        ];

        // æ‰€æœ‰è¯æ±‡ï¼ˆç”¨äºâ€œå…¨éƒ¨è¯æ±‡â€æ¨¡å¼ï¼‰
        const allWords = wordGroups.flat();

        document.addEventListener('DOMContentLoaded', function() {
            // DOM å…ƒç´ 
            const groupSelect = document.getElementById('groupSelect');
            const modeSelect = document.getElementById('modeSelect');
            const definitionElement = document.getElementById('definition');
            const wordInput = document.getElementById('wordInput');
            const checkBtn = document.getElementById('checkBtn');
            const skipBtn = document.getElementById('skipBtn');
            const resultElement = document.getElementById('result');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const wordCard = document.getElementById('wordCard');
            const summaryElement = document.getElementById('summary');
            const scoreElement = document.getElementById('score');
            const totalElement = document.getElementById('total');
            const wrongWordsElement = document.getElementById('wrongWords');
            const restartBtn = document.getElementById('restartBtn');

            // çŠ¶æ€å˜é‡
            let words = [];
            let wordOrder = [];
            let currentWordIndex = 0;
            let correctCount = 0;
            let wrongWords = [];

            // Fisher-Yates æ´—ç‰Œç®—æ³•
            function shuffle(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }

            // æ›´æ–°è¯æ±‡åˆ—è¡¨
            function updateWords() {
                const groupIndex = parseInt(groupSelect.value);
                words = groupIndex === -1 ? allWords : wordGroups[groupIndex];
                wordOrder = shuffle([...Array(words.length).keys()]);
                currentWordIndex = 0;
                correctCount = 0;
                wrongWords = [];
                updateProgress();
                showNextWord();
                wordCard.style.display = 'block';
                summaryElement.style.display = 'none';
            }

            // æ˜¾ç¤ºä¸‹ä¸€ä¸ªå•è¯
            function showNextWord() {
                if (currentWordIndex >= words.length) {
                    finishGame();
                    return;
                }

                const wordIndex = wordOrder[currentWordIndex];
                const word = words[wordIndex];
                const mode = modeSelect.value;
                definitionElement.textContent = mode === 'zh2en' ? word.zh : word.en;
                wordInput.value = '';
                wordInput.placeholder = mode === 'zh2en' ? 'Inserisci in italiano âœï¸' : 'Inserisci in cinese âœï¸';
                resultElement.textContent = '';
                wordInput.focus();
            }

            // æ£€æŸ¥ç­”æ¡ˆ
            function checkAnswer() {
                const userInput = wordInput.value.trim().toLowerCase();
                const wordIndex = wordOrder[currentWordIndex];
                const word = words[wordIndex];
                const mode = modeSelect.value;
                const correctAnswer = mode === 'zh2en' ? word.en.toLowerCase() : word.zh;

                if (!userInput) {
                    resultElement.textContent = 'Inserisci una risposta â—';
                    resultElement.className = 'result incorrect';
                    return;
                }

                if (userInput === correctAnswer) {
                    resultElement.textContent = 'Corretto! âœ…';
                    resultElement.className = 'result correct';
                    correctCount++;
                    currentWordIndex++;
                    updateProgress();
                    setTimeout(showNextWord, 1500);
                } else {
                    resultElement.textContent = `Sbagliato! ğŸ˜” La risposta corretta Ã¨: ${correctAnswer}`;
                    resultElement.className = 'result incorrect';
                    wrongWords.push({ question: mode === 'zh2en' ? word.zh : word.en, correct: correctAnswer, input: userInput });
                }
            }

            // è·³åˆ°ä¸‹ä¸€ä¸ªå•è¯
            function skipWord() {
                const wordIndex = wordOrder[currentWordIndex];
                const word = words[wordIndex];
                const mode = modeSelect.value;
                wrongWords.push({ question: mode === 'zh2en' ? word.zh : word.en, correct: mode === 'zh2en' ? word.en : word.zh, input: 'Saltato â­ï¸' });
                currentWordIndex++;
                updateProgress();
                showNextWord();
            }

            // æ›´æ–°è¿›åº¦æ¡å’Œæ–‡æœ¬
            function updateProgress() {
                const progress = (currentWordIndex / words.length) * 100;
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `${currentWordIndex}/${words.length}`;
            }

            // å®Œæˆæ¸¸æˆ
            function finishGame() {
                wordCard.style.display = 'none';
                summaryElement.style.display = 'block';
                scoreElement.textContent = correctCount;
                totalElement.textContent = words.length;

                // æ˜¾ç¤ºé”™é¢˜
                if (wrongWords.length > 0) {
                    wrongWordsElement.innerHTML = '<h3>Errori da rivedere: ğŸ“</h3><ul>' +
                        wrongWords.map(w => `<li>Domanda: ${w.question}, Risposta corretta: ${w.correct}, Tua risposta: ${w.input}</li>`).join('') +
                        '</ul>';
                } else {
                    wrongWordsElement.innerHTML = '<p>Tutto corretto! Nessun errore ğŸ˜Š</p>';
                }
            }

            // äº‹ä»¶ç›‘å¬å™¨
            groupSelect.addEventListener('change', updateWords);
            modeSelect.addEventListener('change', updateWords);
            checkBtn.addEventListener('click', checkAnswer);
            skipBtn.addEventListener('click', skipWord);
            wordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
            restartBtn.addEventListener('click', updateWords);

            // åˆå§‹åŒ–
            updateWords();
        });
    </script>
</body>
</html>
